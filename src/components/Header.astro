---
// Bu alanda import olmayacak
---
<header transition:persist class="absolute top-0 rounded-b-xl left-0 right-0 z-50 p-5 transition-all duration-500" id="main-header">
  <div class="container mx-auto flex justify-between items-center">
    <a class="text-2xl font-bold tracking-wider text-white" href="/">
      <img
        src="/image/Logo.png"
        class="w-full max-w-24 md:max-w-[150px] "
        alt="çitlembik logo"
      />
    </a>
    <nav class="hidden md:flex space-x-8">
      <a class="text-white hover:text-[var(--accent-color)] transition-colors duration-300" href="/">Anasayfa</a>
      <a class="text-white hover:text-[var(--accent-color)] transition-colors duration-300" href="/hakkimizda">Hakkımızda</a>
      <a class="text-white hover:text-[var(--accent-color)] transition-colors duration-300" href="/hizmetler">Hizmetler</a>
      <a class="text-white hover:text-[var(--accent-color)] transition-colors duration-300" href="/portfolio">Portföy</a>
      <a class="text-white hover:text-[var(--accent-color)] transition-colors duration-300" href="/blog">Blog</a>
      <a class="text-white hover:text-[var(--accent-color)] transition-colors duration-300" href="/iletisim">İletişim</a>
    </nav>
    <button id="menu-toggle" class="md:hidden text-white">
      <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>
    </button>
  </div>
  
  <div id="mobile-menu-backdrop" class="fixed inset-0 bg-black bg-opacity-90 z-60 hidden"></div>
  <div id="mobile-menu" class="fixed inset-0 z-60  flex items-center justify-center transition-opacity duration-100 opacity-0">
    <button id="close-menu" class="absolute top-8 right-5 text-white text-7xl">×</button>
    <div class="flex flex-col gap-10 justify-center items-center">
      <a class="text-white text-2xl hover:text-[var(--accent-color)] transition-colors duration-300" href="/">Anasayfa</a>
      <a class="text-white text-2xl hover:text-[var(--accent-color)] transition-colors duration-300" href="/hakkimizda">Hakkımızda</a>
      <a class="text-white text-2xl hover:text-[var(--accent-color)] transition-colors duration-300" href="/hizmetler">Hizmetler</a>
      <a class="text-white text-2xl hover:text-[var(--accent-color)] transition-colors duration-300" href="/portfolio">Portföy</a>
      <a class="text-white text-2xl hover:text-[var(--accent-color)] transition-colors duration-300" href="/blog">Blog</a>
      <a class="text-white text-2xl hover:text-[var(--accent-color)] transition-colors duration-300" href="/iletisim">İletişim</a>
    </div>
  </div>
</header>

<script>
  function setupHeader() {
    const header = document.getElementById('main-header');
    if (!header) return; // Header yoksa devam etme

    // Mobil Menü Elemanları
    const menuToggle = document.getElementById('menu-toggle');
    const closeMenu = document.getElementById('close-menu');
    const mobileMenu = document.getElementById('mobile-menu');
    const mobileMenuBackdrop = document.getElementById('mobile-menu-backdrop');
    const mobileMenuLinks = document.querySelectorAll('#mobile-menu a');

    // Mobil Menü Fonksiyonları
    const openMobileMenu = () => {
      mobileMenu.classList.remove('hidden');
      mobileMenuBackdrop.classList.remove('hidden');
      setTimeout(() => mobileMenu.classList.remove('opacity-0'), 2);
    };

    const closeMobileMenu = () => {
      mobileMenu.classList.add('opacity-0');
      setTimeout(() => {
        mobileMenu.classList.add('hidden');
        mobileMenuBackdrop.classList.add('hidden');
      }, 10);
    };

    // Mobil Menü Olay Dinleyicileri
    menuToggle.addEventListener('click', openMobileMenu);
    closeMenu.addEventListener('click', closeMobileMenu);
    mobileMenuBackdrop.addEventListener('click', closeMobileMenu);
    mobileMenuLinks.forEach(link => {
      link.addEventListener('click', closeMobileMenu);
    });

    // Header Arka Plan Değişimi (Scroll Olayı)
    const handleScroll = () => {
      if (window.scrollY > 70) {
        header.classList.add('!fixed', 'bg-[#5c6670]', 'bg-opacity-90');
      } else {
        header.classList.remove('!fixed', 'bg-[#5c6670]', 'bg-opacity-90');
      }
    };

    window.addEventListener('scroll', handleScroll);
  }

  // Fonksiyonu hem ilk yüklemede hem de sayfa geçişlerinden sonra çalıştır
  document.addEventListener('astro:page-load', setupHeader);
</script>