---
const slideImages = [
  "/image/1.webp",
  "/image/2.webp",
  "/image/8.webp",
  "/image/4.webp",
  "/image/5.webp",
  "/image/6.webp",
];
---

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
<script is:inline src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<section class="relative h-screen w-full overflow-hidden">
  
  <div class="swiper heroSwiper absolute inset-0 w-full h-full ">
    <div class="swiper-wrapper">
      {slideImages.map((src) => (
        <div class="swiper-slide">
          <div
            class="absolute inset-0 bg-cover bg-center w-full h-full"
            style={`background-image: linear-gradient(rgba(40, 40, 40, 0.4) 0%, rgba(40, 40, 40, 0.6) 100%), url(${src});`}
          ></div>
        </div>
      ))}
    </div>
  </div>

  <div class="absolute inset-0 z-10 flex flex-col items-center justify-center px-4 text-center text-white">
    <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold mb-4 leading-tight">
      <span class="block typewriter-line" data-text="25 Yıllık"></span>
      <span class="block typewriter-line" data-text="Deneyimle"></span>
      <span class="block typewriter-line" data-text="Evlerinizi Şekillendiriyoruz"></span>
    </h1>
    <p class="text-base sm:text-lg md:text-xl max-w-2xl mx-auto mb-8 font-light leading-relaxed">
      Çitlembik Dekorasyon olarak 25 yıldır ev sahiplerine özel çözümler sunuyor, yaşam alanlarını işlevsel ve estetik hale getiriyoruz.
    </p>
    <a
      class="inline-block bg-white text-[var(--text-primary)] hover:bg-[var(--accent-color)] transition-all duration-300 ease-in-out text-base font-medium py-3 px-8 rounded-full shadow-lg transform hover:-translate-y-1"
      href="/iletisim"
    >
      Hemen Teklif Alın
    </a>
  </div>
</section>

<style>
  /* Aktif olan slide'daki resme zoom animasyonu uygula */
  .swiper-slide-active .bg-cover {
    animation: heroZoom 10s ease-out forwards;
  }

  /* Swiper oklarının rengini beyaz yap */
  .swiper-button-next,
  .swiper-button-prev {
    color: white !important;
  }
</style>

<script>
  function runTypewriterAnimation() {
    const heroTitleLines = document.querySelectorAll('.typewriter-line');
    if (!heroTitleLines.length) return;
    
    // Reset lines for re-animation
    heroTitleLines.forEach(line => {
      line.textContent = '';
      line.style.width = '0';
      line.style.transition = 'none';
      line.style.whiteSpace = 'nowrap';
      line.style.overflow = 'hidden';
    });

    // Start animation after a short delay
    setTimeout(() => {
      let cumulativeDelay = 0;
      heroTitleLines.forEach((line) => {
        const text = line.getAttribute('data-text');
        const textLength = text.length;
        
        // Duration based on text length for a more natural feel
        // Adjust the multiplier (e.g., 50) to speed up/slow down typing
        const duration = textLength * 50; 

        line.textContent = text;

        setTimeout(() => {
          line.style.transition = `width ${duration}ms steps(${textLength}, end)`;
          line.style.width = '100%';
          
          // After typing animation finishes, set width to auto
          setTimeout(() => {
            line.style.width = 'auto';
            line.style.overflow = 'visible';
            line.style.whiteSpace = 'normal';
          }, duration);

        }, cumulativeDelay);
        
        // Add current line's duration + a pause to the cumulative delay
        cumulativeDelay += duration + 200; // 200ms pause between lines
      });
    }, 200); // 200ms initial delay before starting the whole animation
  }

  function initializeHero() {
    const swiperElement = document.querySelector('.heroSwiper');
    if (!swiperElement) return;

    const interval = setInterval(() => {
      if (typeof Swiper !== 'undefined') {
        clearInterval(interval);
        if (swiperElement.swiper) return;

        new Swiper(".heroSwiper", {
          loop: true,
          effect: 'fade',
          fadeEffect: {
            crossFade: true
          },
          autoplay: { delay: 3000, disableOnInteraction: false },
          navigation: { nextEl: ".swiper-button-next", prevEl: ".swiper-button-prev" },
          // on: { ... } bloğu buradan silindi.
        });
        
        // Yazı animasyonu sadece ilk başta bir kere çalışacak
        runTypewriterAnimation();
      }
    }, 100);
  }
  
  document.addEventListener('DOMContentLoaded', initializeHero);
</script>
