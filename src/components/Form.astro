
<div class="flex flex-col items-center py-10 bg-gray-100 p-4">
  <h1 class="text-5xl font-semibold mb-6 text-gray-800">Bize Ulaşın</h1>
  
  <form id="form" class="bg-white p-8 rounded-lg shadow-lg w-full max-w-2xl space-y-6">
    
    <div>
      <label for="name" class="block text-lg font-medium text-gray-700">Ad Soyad</label>
      <input type="text" name="Ad Soyad" id="name" placeholder="Adınızı ve soyadınızı girin" required
        class="w-full px-4 py-3 mt-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]" />
    </div>

    <div>
      <label for="email" class="block text-lg font-medium text-gray-700">E-posta</label>
      <input type="email" name="email" id="email" placeholder="E-posta adresinizi girin" required
        class="w-full px-4 py-3 mt-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]" />
    </div>

    <div>
      <label for="phone" class="block text-lg font-medium text-gray-700">Telefon</label>
      <input type="tel" name="Telefon" id="phone" placeholder="Telefon numaranızı girin"
        class="w-full px-4 py-3 mt-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]" />
    </div>

    <div>
      <label for="subject" class="block text-lg font-medium text-gray-700">Konu</label>
      <select name="Konu" id="subject" required
        class="w-full px-4 py-3 mt-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)]">
        <option value="">Lütfen bir konu seçin</option>
        <option value="Genel Bilgi">Genel Bilgi</option>
        <option value="Fiyat Teklifi">Fiyat Teklifi</option>
        <option value="Ürün Siparişi">Ürün Siparişi</option>
        <option value="Diğer">Diğer</option>
      </select>
    </div>

    <div>
      <label for="message" class="block text-lg font-medium text-gray-700">Mesajınız</label>
      <textarea name="Mesaj" id="message" placeholder="Mesajınızı buraya yazın..." required
        class="w-full px-4 py-3 mt-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] h-32"></textarea>
    </div>

    <div>
      <button type="submit"
        class="w-full py-3 bg-[var(--accent-color)] text-[var(--text-primary)] hover:bg-[var(--text-primary)] hover:text-white transition-colors font-semibold rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--text-primary)]">
        Gönder
      </button>
    </div>
  </form>
</div>

<script>
  // Scriptin birden fazla kez çalışmasını engellemek için kontrol
  if (!document.getElementById("form")._formScriptAttached) {
    document.getElementById("form")._formScriptAttached = true;

    document.getElementById("form").addEventListener("submit", async function(e) {
      e.preventDefault(); // Formun sayfayı yenilemesini engeller

      const form = e.target;
      const formData = new FormData(form);
      const button = form.querySelector('button[type="submit"]');
      const originalButtonText = button.textContent;

      // Butonu devre dışı bırak ve metni değiştir
      button.disabled = true;
      button.textContent = "Gönderiliyor...";

      try {
        const response = await fetch("https://formspree.io/f/meoljjnv", {
          method: "POST",
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });

        if (response.ok) {
          alert("Mesajınız başarıyla gönderildi. Teşekkür ederiz!");
          form.reset(); // Formu temizle
        } else {
          // Sunucudan gelen hata mesajını kullanmayı dene
          const data = await response.json();
          if (Object.hasOwn(data, 'errors')) {
              alert(data["errors"].map(error => error["message"]).join(", "));
          } else {
              alert("Form gönderilemedi. Lütfen tekrar deneyin.");
          }
        }
      } catch (error) {
        console.error("Form gönderme hatası:", error);
        alert("Bir hata oluştu. Lütfen daha sonra tekrar deneyin.");
      } finally {
        // Butonu tekrar aktif et ve metni eski haline getir
        button.disabled = false;
        button.textContent = originalButtonText;
      }
    });
  }
</script>
